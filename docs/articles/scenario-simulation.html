<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A scenario decision tree simulation • LTBIscreeningproject</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="A scenario decision tree simulation">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LTBIscreeningproject</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/active-tb-imputation.html">Active TB progression estimation</a>
    </li>
    <li>
      <a href="../articles/cost-effectiveness-analysis.html">Cost-effectiveness analysis</a>
    </li>
    <li>
      <a href="../articles/scenario-simulation.html">A scenario decision tree simulation</a>
    </li>
    <li>
      <a href="../articles/set-up.html">Basic example: model set-up</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>A scenario decision tree simulation</h1>
                        <h4 class="author">Nathan Green</h4>
            
            <h4 class="date">2018-03-27</h4>
      
      

    </div>

    
    
<div class="contents">
<p>This document demonstrates running the screening, diagnosis and treatment decision tree model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(treeSimR)
<span class="kw">library</span>(LTBIscreeningproject)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(data.tree)
<span class="kw">library</span>(purrr)</code></pre></div>
<p>Load in data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"intervention_constants"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)
<span class="kw">data</span>(<span class="st">"cost_effectivness_params"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)
<span class="kw">data</span>(<span class="st">"scenario_parameters"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)
<span class="kw">data</span>(<span class="st">"year_prob.activetb_cens_exituk"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)
<span class="kw">data</span>(<span class="st">"year_prob.activetb_cmprsk_exituk"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)
<span class="kw">data</span>(<span class="st">"model_input_cohort"</span>, <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)</code></pre></div>
<div id="specific-intervention-data-prep" class="section level2">
<h2 class="hasAnchor">
<a href="#specific-intervention-data-prep" class="anchor"></a>Specific intervention data prep</h2>
<p>According to the parameter values we specified in <code>interv</code> we first need to prepare the cohort data set.</p>
<p>Only use a single year cohort</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">IMPUTED_sample_year_cohort &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(IMPUTED_sample,
                                            issdt_year <span class="op">==</span><span class="st"> </span>interv<span class="op">$</span>year_cohort)</code></pre></div>
<p>EWNI stay long enough</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">IMPUTED_sample_year_cohort &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(IMPUTED_sample_year_cohort,
                                            date_exit_uk1_issdt.years <span class="op">&gt;=</span><span class="st"> </span>interv<span class="op">$</span>min_screen_length_of_stay)</code></pre></div>
<p>Only keep those inidiviuals that are screened before some other event</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (interv<span class="op">$</span>screen_with_delay) {
  IMPUTED_sample_year_cohort &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(IMPUTED_sample_year_cohort,
                                              screen <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)}</code></pre></div>
<p>Do we include student in the screening programme?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (interv<span class="op">$</span>no_students) {
  IMPUTED_sample_year_cohort &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(IMPUTED_sample_year_cohort,
                                              visatype2 <span class="op">!=</span><span class="st"> "Students"</span>)}</code></pre></div>
<p>Remove individuals from ‘lower’ incidence countries</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">IMPUTED_sample_year_cohort &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(IMPUTED_sample_year_cohort,
                                            who_prev_cat_Pareek2011 <span class="op">%in%</span><span class="st"> </span>interv<span class="op">$</span>incidence_grps_screen)</code></pre></div>
<p>Count numbers of TB cases</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n.exit_tb &lt;-
<span class="st">  </span>IMPUTED_sample_year_cohort <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(exituk_tb) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>()

n.uk_tb &lt;-
<span class="st">  </span>IMPUTED_sample_year_cohort <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(uk_tb) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>()


num_all_tb_cost &lt;-
<span class="st">  </span><span class="cf">if</span> (interv<span class="op">$</span>ENDPOINT_cost <span class="op">==</span><span class="st"> "exit uk"</span>) {
    n.uk_tb
  } <span class="cf">else</span> <span class="cf">if</span> (interv<span class="op">$</span>ENDPOINT_cost <span class="op">==</span><span class="st"> "death"</span>) {
    n.uk_tb <span class="op">+</span><span class="st"> </span>n.exit_tb}

num_all_tb_QALY &lt;-
<span class="st">  </span><span class="cf">if</span> (interv<span class="op">$</span>ENDPOINT_QALY <span class="op">==</span><span class="st"> "exit uk"</span>) {
    n.uk_tb
  } <span class="cf">else</span> <span class="cf">if</span> (interv<span class="op">$</span>ENDPOINT_QALY <span class="op">==</span><span class="st"> "death"</span>) {
    n.uk_tb <span class="op">+</span><span class="st"> </span>n.exit_tb}</code></pre></div>
</div>
<div id="prep-decision-tree" class="section level2">
<h2 class="hasAnchor">
<a href="#prep-decision-tree" class="anchor"></a>Prep decision tree</h2>
<p>Load input files. We have defined the decision tree using YAML syntax. We have a separate trees for cost and health. They have the same structure and probabilities but different values on the branches. We also create our own class.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">osNode.cost.fileName &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"data"</span>, <span class="st">"LTBI_dtree-cost-symptoms.yaml"</span>,
                                    <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)

osNode.health.fileName &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"data"</span>, <span class="st">"LTBI_dtree-QALYloss-symptoms.yaml"</span>,
                                      <span class="dt">package =</span> <span class="st">"LTBIscreeningproject"</span>)

costeff.cost &lt;-<span class="st"> </span>treeSimR<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/treeSimR/topics/costeffectiveness_tree">costeffectiveness_tree</a></span>(<span class="dt">yaml_tree =</span> osNode.cost.fileName)
osNode.cost &lt;-<span class="st"> </span>costeff.cost<span class="op">$</span>osNode

costeff.health &lt;-<span class="st"> </span>treeSimR<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/treeSimR/topics/costeffectiveness_tree">costeffectiveness_tree</a></span>(<span class="dt">yaml_tree =</span> osNode.health.fileName)
osNode.health &lt;-<span class="st"> </span>costeff.health<span class="op">$</span>osNode</code></pre></div>
<pre><code>#&gt; Warning in treeSimR::costeffectiveness_tree(yaml_tree = "LTBI_dtree-cost-
#&gt; symptoms.yaml"): Check type of attributes. Should they be numeric rather
#&gt; than character?
#&gt; $osNode
#&gt;                                                  levelName distn    max
#&gt; 1   LTBI screening cost                                     unif   0.00
#&gt; 2    ¦--(0,50]                                              unif   0.00
#&gt; 3    ¦   ¦--LTBI                                            unif   0.00
#&gt; 4    ¦   ¦   ¦--Not Agree to Screen                         unif   0.00
#&gt; 5    ¦   ¦   °--Agree to Screen                             unif 106.00
#&gt; 6    ¦   ¦       ¦--1-Sensitivity                           unif   0.00
#&gt; 7    ¦   ¦       °--Sensitivity                             unif   0.00
#&gt; 8    ¦   ¦           ¦--Not Start Treatment                 unif   0.00
#&gt; 9    ¦   ¦           °--Start Treatment                     unif   0.00
#&gt; 10   ¦   ¦               ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 11   ¦   ¦               ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 12   ¦   ¦               ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 13   ¦   ¦               ¦   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 14   ¦   ¦               ¦   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 15   ¦   ¦               ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 16   ¦   ¦               ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 17   ¦   ¦               ¦       ¦--Complete Treatment      unif 842.45
#&gt; 18   ¦   ¦               ¦       ¦   ¦--Effective           unif   0.00
#&gt; 19   ¦   ¦               ¦       ¦   °--Not Effective       unif   0.00
#&gt; 20   ¦   ¦               ¦       °--Not Complete Treatment  unif 140.41
#&gt; 21   ¦   ¦               °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 22   ¦   ¦                   ¦--Symptoms Nausea            gamma     NA
#&gt; 23   ¦   ¦                   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 24   ¦   ¦                   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 25   ¦   ¦                   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 26   ¦   ¦                   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 27   ¦   ¦                   °--Not Symptoms Nausea         unif   0.00
#&gt; 28   ¦   ¦                       ¦--Complete Treatment      unif 842.45
#&gt; 29   ¦   ¦                       ¦   ¦--Effective           unif   0.00
#&gt; 30   ¦   ¦                       ¦   °--Not Effective       unif   0.00
#&gt; 31   ¦   ¦                       °--Not Complete Treatment  unif 140.41
#&gt; 32   ¦   °--non-LTBI                                        unif   0.00
#&gt; 33   ¦       ¦--Not Agree to Screen                         unif   0.00
#&gt; 34   ¦       °--Agree to Screen                             unif 106.00
#&gt; 35   ¦           ¦--Specificity                             unif   0.00
#&gt; 36   ¦           °--1-Specificity                           unif   0.00
#&gt; 37   ¦               ¦--Not Start Treatment                 unif   0.00
#&gt; 38   ¦               °--Start Treatment                     unif   0.00
#&gt; 39   ¦                   ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 40   ¦                   ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 41   ¦                   ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 42   ¦                   ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 43   ¦                   ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 44   ¦                   ¦       ¦--Complete Treatment      unif 842.45
#&gt; 45   ¦                   ¦       °--Not Complete Treatment  unif 140.41
#&gt; 46   ¦                   °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 47   ¦                       ¦--Symptoms Nausea            gamma     NA
#&gt; 48   ¦                       ¦   ¦--Complete Treatment      unif 842.45
#&gt; 49   ¦                       ¦   °--Not Complete Treatment  unif 140.41
#&gt; 50   ¦                       °--Not Symptoms Nausea         unif   0.00
#&gt; 51   ¦                           ¦--Complete Treatment      unif 842.45
#&gt; 52   ¦                           °--Not Complete Treatment  unif 140.41
#&gt; 53   ¦--(50,150]                                            unif   0.00
#&gt; 54   ¦   ¦--LTBI                                            unif   0.00
#&gt; 55   ¦   ¦   ¦--Not Agree to Screen                         unif   0.00
#&gt; 56   ¦   ¦   °--Agree to Screen                             unif 106.00
#&gt; 57   ¦   ¦       ¦--1-Sensitivity                           unif   0.00
#&gt; 58   ¦   ¦       °--Sensitivity                             unif   0.00
#&gt; 59   ¦   ¦           ¦--Not Start Treatment                 unif   0.00
#&gt; 60   ¦   ¦           °--Start Treatment                     unif   0.00
#&gt; 61   ¦   ¦               ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 62   ¦   ¦               ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 63   ¦   ¦               ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 64   ¦   ¦               ¦   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 65   ¦   ¦               ¦   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 66   ¦   ¦               ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 67   ¦   ¦               ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 68   ¦   ¦               ¦       ¦--Complete Treatment      unif 842.45
#&gt; 69   ¦   ¦               ¦       ¦   ¦--Effective           unif   0.00
#&gt; 70   ¦   ¦               ¦       ¦   °--Not Effective       unif   0.00
#&gt; 71   ¦   ¦               ¦       °--Not Complete Treatment  unif 140.41
#&gt; 72   ¦   ¦               °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 73   ¦   ¦                   ¦--Symptoms Nausea            gamma     NA
#&gt; 74   ¦   ¦                   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 75   ¦   ¦                   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 76   ¦   ¦                   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 77   ¦   ¦                   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 78   ¦   ¦                   °--Not Symptoms Nausea         unif   0.00
#&gt; 79   ¦   ¦                       ¦--Complete Treatment      unif 842.45
#&gt; 80   ¦   ¦                       ¦   ¦--Effective           unif   0.00
#&gt; 81   ¦   ¦                       ¦   °--Not Effective       unif   0.00
#&gt; 82   ¦   ¦                       °--Not Complete Treatment  unif 140.41
#&gt; 83   ¦   °--non-LTBI                                        unif   0.00
#&gt; 84   ¦       ¦--Not Agree to Screen                         unif   0.00
#&gt; 85   ¦       °--Agree to Screen                             unif 106.00
#&gt; 86   ¦           ¦--Specificity                             unif   0.00
#&gt; 87   ¦           °--1-Specificity                           unif   0.00
#&gt; 88   ¦               ¦--Not Start Treatment                 unif   0.00
#&gt; 89   ¦               °--Start Treatment                     unif   0.00
#&gt; 90   ¦                   ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 91   ¦                   ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 92   ¦                   ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 93   ¦                   ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 94   ¦                   ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 95   ¦                   ¦       ¦--Complete Treatment      unif 842.45
#&gt; 96   ¦                   ¦       °--Not Complete Treatment  unif 140.41
#&gt; 97   ¦                   °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 98   ¦                       ¦--Symptoms Nausea            gamma     NA
#&gt; 99   ¦                       ¦   ¦--Complete Treatment      unif 842.45
#&gt; 100  ¦                       ¦   °--Not Complete Treatment  unif 140.41
#&gt; 101  ¦                       °--Not Symptoms Nausea         unif   0.00
#&gt; 102  ¦                           ¦--Complete Treatment      unif 842.45
#&gt; 103  ¦                           °--Not Complete Treatment  unif 140.41
#&gt; 104  ¦--(150,250]                                           unif   0.00
#&gt; 105  ¦   ¦--LTBI                                            unif   0.00
#&gt; 106  ¦   ¦   ¦--Not Agree to Screen                         unif   0.00
#&gt; 107  ¦   ¦   °--Agree to Screen                             unif 106.00
#&gt; 108  ¦   ¦       ¦--1-Sensitivity                           unif   0.00
#&gt; 109  ¦   ¦       °--Sensitivity                             unif   0.00
#&gt; 110  ¦   ¦           ¦--Not Start Treatment                 unif   0.00
#&gt; 111  ¦   ¦           °--Start Treatment                     unif   0.00
#&gt; 112  ¦   ¦               ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 113  ¦   ¦               ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 114  ¦   ¦               ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 115  ¦   ¦               ¦   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 116  ¦   ¦               ¦   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 117  ¦   ¦               ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 118  ¦   ¦               ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 119  ¦   ¦               ¦       ¦--Complete Treatment      unif 842.45
#&gt; 120  ¦   ¦               ¦       ¦   ¦--Effective           unif   0.00
#&gt; 121  ¦   ¦               ¦       ¦   °--Not Effective       unif   0.00
#&gt; 122  ¦   ¦               ¦       °--Not Complete Treatment  unif 140.41
#&gt; 123  ¦   ¦               °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 124  ¦   ¦                   ¦--Symptoms Nausea            gamma     NA
#&gt; 125  ¦   ¦                   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 126  ¦   ¦                   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 127  ¦   ¦                   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 128  ¦   ¦                   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 129  ¦   ¦                   °--Not Symptoms Nausea         unif   0.00
#&gt; 130  ¦   ¦                       ¦--Complete Treatment      unif 842.45
#&gt; 131  ¦   ¦                       ¦   ¦--Effective           unif   0.00
#&gt; 132  ¦   ¦                       ¦   °--Not Effective       unif   0.00
#&gt; 133  ¦   ¦                       °--Not Complete Treatment  unif 140.41
#&gt; 134  ¦   °--non-LTBI                                        unif   0.00
#&gt; 135  ¦       ¦--Not Agree to Screen                         unif   0.00
#&gt; 136  ¦       °--Agree to Screen                             unif 106.00
#&gt; 137  ¦           ¦--Specificity                             unif   0.00
#&gt; 138  ¦           °--1-Specificity                           unif   0.00
#&gt; 139  ¦               ¦--Not Start Treatment                 unif   0.00
#&gt; 140  ¦               °--Start Treatment                     unif   0.00
#&gt; 141  ¦                   ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 142  ¦                   ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 143  ¦                   ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 144  ¦                   ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 145  ¦                   ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 146  ¦                   ¦       ¦--Complete Treatment      unif 842.45
#&gt; 147  ¦                   ¦       °--Not Complete Treatment  unif 140.41
#&gt; 148  ¦                   °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 149  ¦                       ¦--Symptoms Nausea            gamma     NA
#&gt; 150  ¦                       ¦   ¦--Complete Treatment      unif 842.45
#&gt; 151  ¦                       ¦   °--Not Complete Treatment  unif 140.41
#&gt; 152  ¦                       °--Not Symptoms Nausea         unif   0.00
#&gt; 153  ¦                           ¦--Complete Treatment      unif 842.45
#&gt; 154  ¦                           °--Not Complete Treatment  unif 140.41
#&gt; 155  ¦--(250,350]                                           unif   0.00
#&gt; 156  ¦   ¦--LTBI                                            unif   0.00
#&gt; 157  ¦   ¦   ¦--Not Agree to Screen                         unif   0.00
#&gt; 158  ¦   ¦   °--Agree to Screen                             unif 106.00
#&gt; 159  ¦   ¦       ¦--1-Sensitivity                           unif   0.00
#&gt; 160  ¦   ¦       °--Sensitivity                             unif   0.00
#&gt; 161  ¦   ¦           ¦--Not Start Treatment                 unif   0.00
#&gt; 162  ¦   ¦           °--Start Treatment                     unif   0.00
#&gt; 163  ¦   ¦               ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 164  ¦   ¦               ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 165  ¦   ¦               ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 166  ¦   ¦               ¦   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 167  ¦   ¦               ¦   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 168  ¦   ¦               ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 169  ¦   ¦               ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 170  ¦   ¦               ¦       ¦--Complete Treatment      unif 842.45
#&gt; 171  ¦   ¦               ¦       ¦   ¦--Effective           unif   0.00
#&gt; 172  ¦   ¦               ¦       ¦   °--Not Effective       unif   0.00
#&gt; 173  ¦   ¦               ¦       °--Not Complete Treatment  unif 140.41
#&gt; 174  ¦   ¦               °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 175  ¦   ¦                   ¦--Symptoms Nausea            gamma     NA
#&gt; 176  ¦   ¦                   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 177  ¦   ¦                   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 178  ¦   ¦                   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 179  ¦   ¦                   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 180  ¦   ¦                   °--Not Symptoms Nausea         unif   0.00
#&gt; 181  ¦   ¦                       ¦--Complete Treatment      unif 842.45
#&gt; 182  ¦   ¦                       ¦   ¦--Effective           unif   0.00
#&gt; 183  ¦   ¦                       ¦   °--Not Effective       unif   0.00
#&gt; 184  ¦   ¦                       °--Not Complete Treatment  unif 140.41
#&gt; 185  ¦   °--non-LTBI                                        unif   0.00
#&gt; 186  ¦       ¦--Not Agree to Screen                         unif   0.00
#&gt; 187  ¦       °--Agree to Screen                             unif 106.00
#&gt; 188  ¦           ¦--Specificity                             unif   0.00
#&gt; 189  ¦           °--1-Specificity                           unif   0.00
#&gt; 190  ¦               ¦--Not Start Treatment                 unif   0.00
#&gt; 191  ¦               °--Start Treatment                     unif   0.00
#&gt; 192  ¦                   ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 193  ¦                   ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 194  ¦                   ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 195  ¦                   ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 196  ¦                   ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 197  ¦                   ¦       ¦--Complete Treatment      unif 842.45
#&gt; 198  ¦                   ¦       °--Not Complete Treatment  unif 140.41
#&gt; 199  ¦                   °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 200  ¦                       ¦--Symptoms Nausea            gamma     NA
#&gt; 201  ¦                       ¦   ¦--Complete Treatment      unif 842.45
#&gt; 202  ¦                       ¦   °--Not Complete Treatment  unif 140.41
#&gt; 203  ¦                       °--Not Symptoms Nausea         unif   0.00
#&gt; 204  ¦                           ¦--Complete Treatment      unif 842.45
#&gt; 205  ¦                           °--Not Complete Treatment  unif 140.41
#&gt; 206  °--(350,1e+05]                                         unif   0.00
#&gt; 207      ¦--LTBI                                            unif   0.00
#&gt; 208      ¦   ¦--Not Agree to Screen                         unif   0.00
#&gt; 209      ¦   °--Agree to Screen                             unif 106.00
#&gt; 210      ¦       ¦--1-Sensitivity                           unif   0.00
#&gt; 211      ¦       °--Sensitivity                             unif   0.00
#&gt; 212      ¦           ¦--Not Start Treatment                 unif   0.00
#&gt; 213      ¦           °--Start Treatment                     unif   0.00
#&gt; 214      ¦               ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 215      ¦               ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 216      ¦               ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 217      ¦               ¦   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 218      ¦               ¦   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 219      ¦               ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 220      ¦               ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 221      ¦               ¦       ¦--Complete Treatment      unif 842.45
#&gt; 222      ¦               ¦       ¦   ¦--Effective           unif   0.00
#&gt; 223      ¦               ¦       ¦   °--Not Effective       unif   0.00
#&gt; 224      ¦               ¦       °--Not Complete Treatment  unif 140.41
#&gt; 225      ¦               °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 226      ¦                   ¦--Symptoms Nausea            gamma     NA
#&gt; 227      ¦                   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 228      ¦                   ¦   ¦   ¦--Effective           unif   0.00
#&gt; 229      ¦                   ¦   ¦   °--Not Effective       unif   0.00
#&gt; 230      ¦                   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 231      ¦                   °--Not Symptoms Nausea         unif   0.00
#&gt; 232      ¦                       ¦--Complete Treatment      unif 842.45
#&gt; 233      ¦                       ¦   ¦--Effective           unif   0.00
#&gt; 234      ¦                       ¦   °--Not Effective       unif   0.00
#&gt; 235      ¦                       °--Not Complete Treatment  unif 140.41
#&gt; 236      °--non-LTBI                                        unif   0.00
#&gt; 237          ¦--Not Agree to Screen                         unif   0.00
#&gt; 238          °--Agree to Screen                             unif 106.00
#&gt; 239              ¦--Specificity                             unif   0.00
#&gt; 240              °--1-Specificity                           unif   0.00
#&gt; 241                  ¦--Not Start Treatment                 unif   0.00
#&gt; 242                  °--Start Treatment                     unif   0.00
#&gt; 243                      ¦--Symptoms Hepatotoxicity        gamma     NA
#&gt; 244                      ¦   ¦--Symptoms Nausea            gamma     NA
#&gt; 245                      ¦   ¦   ¦--Complete Treatment      unif 842.45
#&gt; 246                      ¦   ¦   °--Not Complete Treatment  unif 140.41
#&gt; 247                      ¦   °--Not Symptoms Nausea         unif   0.00
#&gt; 248                      ¦       ¦--Complete Treatment      unif 842.45
#&gt; 249                      ¦       °--Not Complete Treatment  unif 140.41
#&gt; 250                      °--Not Symptoms Hepatotoxicity     unif   0.00
#&gt; 251                          ¦--Symptoms Nausea            gamma     NA
#&gt; 252                          ¦   ¦--Complete Treatment      unif 842.45
#&gt; 253                          ¦   °--Not Complete Treatment  unif 140.41
#&gt; 254                          °--Not Symptoms Nausea         unif   0.00
#&gt; 255                              ¦--Complete Treatment      unif 842.45
#&gt; 256                              °--Not Complete Treatment  unif 140.41
#&gt;        min       p  scale shape     type
#&gt; 1     0.00 1.00000     NA    NA  logical
#&gt; 2     0.00 0.00000                chance
#&gt; 3     0.00 0.03000                chance
#&gt; 4     0.00 0.40000              terminal
#&gt; 5    50.00 0.60000                chance
#&gt; 6     0.00 0.16000              terminal
#&gt; 7     0.00 0.84000                chance
#&gt; 8     0.00 0.30000              terminal
#&gt; 9     0.00 0.70000                chance
#&gt; 10      NA 0.00245 87.889 6.679   chance
#&gt; 11      NA 0.14300     13     5   chance
#&gt; 12  511.69 0.80000                chance
#&gt; 13    0.00 0.90000              terminal
#&gt; 14    0.00 0.10000              terminal
#&gt; 15   85.24 0.20000              terminal
#&gt; 16    0.00 0.85700                chance
#&gt; 17  511.69 0.80000                chance
#&gt; 18    0.00 0.90000              terminal
#&gt; 19    0.00 0.10000              terminal
#&gt; 20   85.24 0.20000              terminal
#&gt; 21    0.00 0.99755                chance
#&gt; 22      NA 0.14300     13     5   chance
#&gt; 23  511.69 0.80000                chance
#&gt; 24    0.00 0.90000              terminal
#&gt; 25    0.00 0.10000              terminal
#&gt; 26   85.24 0.20000              terminal
#&gt; 27    0.00 0.85700                chance
#&gt; 28  511.69 0.80000                chance
#&gt; 29    0.00 0.90000              terminal
#&gt; 30    0.00 0.10000              terminal
#&gt; 31   85.24 0.20000              terminal
#&gt; 32    0.00 0.97000                chance
#&gt; 33    0.00 0.40000              terminal
#&gt; 34   50.00 0.60000                chance
#&gt; 35    0.00 0.99000              terminal
#&gt; 36    0.00 0.01000                chance
#&gt; 37    0.00 0.30000              terminal
#&gt; 38    0.00 0.70000                chance
#&gt; 39      NA 0.00245 87.889 6.679   chance
#&gt; 40      NA 0.14300     13     5   chance
#&gt; 41  511.69 0.80000              terminal
#&gt; 42   85.24 0.20000              terminal
#&gt; 43    0.00 0.85700                chance
#&gt; 44  511.69 0.80000              terminal
#&gt; 45   85.24 0.20000              terminal
#&gt; 46    0.00 0.99755                chance
#&gt; 47      NA 0.14300     13     5   chance
#&gt; 48  511.69 0.80000              terminal
#&gt; 49   85.24 0.20000              terminal
#&gt; 50    0.00 0.85700                chance
#&gt; 51  511.69 0.80000              terminal
#&gt; 52   85.24 0.20000              terminal
#&gt; 53    0.00 0.04000                chance
#&gt; 54    0.00 0.03000                chance
#&gt; 55    0.00 0.40000              terminal
#&gt; 56   50.00 0.60000                chance
#&gt; 57    0.00 0.16000              terminal
#&gt; 58    0.00 0.84000                chance
#&gt; 59    0.00 0.30000              terminal
#&gt; 60    0.00 0.70000                chance
#&gt; 61      NA 0.00245 87.889 6.679   chance
#&gt; 62      NA 0.14300     13     5   chance
#&gt; 63  511.69 0.80000                chance
#&gt; 64    0.00 0.90000              terminal
#&gt; 65    0.00 0.10000              terminal
#&gt; 66   85.24 0.20000              terminal
#&gt; 67    0.00 0.85700                chance
#&gt; 68  511.69 0.80000                chance
#&gt; 69    0.00 0.90000              terminal
#&gt; 70    0.00 0.10000              terminal
#&gt; 71   85.24 0.20000              terminal
#&gt; 72    0.00 0.99755                chance
#&gt; 73      NA 0.14300     13     5   chance
#&gt; 74  511.69 0.80000                chance
#&gt; 75    0.00 0.90000              terminal
#&gt; 76    0.00 0.10000              terminal
#&gt; 77   85.24 0.20000              terminal
#&gt; 78    0.00 0.85700                chance
#&gt; 79  511.69 0.80000                chance
#&gt; 80    0.00 0.90000              terminal
#&gt; 81    0.00 0.10000              terminal
#&gt; 82   85.24 0.20000              terminal
#&gt; 83    0.00 0.97000                chance
#&gt; 84    0.00 0.40000              terminal
#&gt; 85   50.00 0.60000                chance
#&gt; 86    0.00 0.99000              terminal
#&gt; 87    0.00 0.01000                chance
#&gt; 88    0.00 0.30000              terminal
#&gt; 89    0.00 0.70000                chance
#&gt; 90      NA 0.00245 87.889 6.679   chance
#&gt; 91      NA 0.14300     13     5   chance
#&gt; 92  511.69 0.80000              terminal
#&gt; 93   85.24 0.20000              terminal
#&gt; 94    0.00 0.85700                chance
#&gt; 95  511.69 0.80000              terminal
#&gt; 96   85.24 0.20000              terminal
#&gt; 97    0.00 0.99755                chance
#&gt; 98      NA 0.14300     13     5   chance
#&gt; 99  511.69 0.80000              terminal
#&gt; 100  85.24 0.20000              terminal
#&gt; 101   0.00 0.85700                chance
#&gt; 102 511.69 0.80000              terminal
#&gt; 103  85.24 0.20000              terminal
#&gt; 104   0.00 0.16000                chance
#&gt; 105   0.00 0.03000                chance
#&gt; 106   0.00 0.40000              terminal
#&gt; 107  50.00 0.60000                chance
#&gt; 108   0.00 0.16000              terminal
#&gt; 109   0.00 0.84000                chance
#&gt; 110   0.00 0.30000              terminal
#&gt; 111   0.00 0.70000                chance
#&gt; 112     NA 0.00245 87.889 6.679   chance
#&gt; 113     NA 0.14300     13     5   chance
#&gt; 114 511.69 0.80000                chance
#&gt; 115   0.00 0.90000              terminal
#&gt; 116   0.00 0.10000              terminal
#&gt; 117  85.24 0.20000              terminal
#&gt; 118   0.00 0.85700                chance
#&gt; 119 511.69 0.80000                chance
#&gt; 120   0.00 0.90000              terminal
#&gt; 121   0.00 0.10000              terminal
#&gt; 122  85.24 0.20000              terminal
#&gt; 123   0.00 0.99755                chance
#&gt; 124     NA 0.14300     13     5   chance
#&gt; 125 511.69 0.80000                chance
#&gt; 126   0.00 0.90000              terminal
#&gt; 127   0.00 0.10000              terminal
#&gt; 128  85.24 0.20000              terminal
#&gt; 129   0.00 0.85700                chance
#&gt; 130 511.69 0.80000                chance
#&gt; 131   0.00 0.90000              terminal
#&gt; 132   0.00 0.10000              terminal
#&gt; 133  85.24 0.20000              terminal
#&gt; 134   0.00 0.97000                chance
#&gt; 135   0.00 0.40000              terminal
#&gt; 136  50.00 0.60000                chance
#&gt; 137   0.00 0.99000              terminal
#&gt; 138   0.00 0.01000                chance
#&gt; 139   0.00 0.30000              terminal
#&gt; 140   0.00 0.70000                chance
#&gt; 141     NA 0.00245 87.889 6.679   chance
#&gt; 142     NA 0.14300     13     5   chance
#&gt; 143 511.69 0.80000              terminal
#&gt; 144  85.24 0.20000              terminal
#&gt; 145   0.00 0.85700                chance
#&gt; 146 511.69 0.80000              terminal
#&gt; 147  85.24 0.20000              terminal
#&gt; 148   0.00 0.99755                chance
#&gt; 149     NA 0.14300     13     5   chance
#&gt; 150 511.69 0.80000              terminal
#&gt; 151  85.24 0.20000              terminal
#&gt; 152   0.00 0.85700                chance
#&gt; 153 511.69 0.80000              terminal
#&gt; 154  85.24 0.20000              terminal
#&gt; 155   0.00 0.60000                chance
#&gt; 156   0.00 0.03000                chance
#&gt; 157   0.00 0.40000              terminal
#&gt; 158  50.00 0.60000                chance
#&gt; 159   0.00 0.16000              terminal
#&gt; 160   0.00 0.84000                chance
#&gt; 161   0.00 0.30000              terminal
#&gt; 162   0.00 0.70000                chance
#&gt; 163     NA 0.00245 87.889 6.679   chance
#&gt; 164     NA 0.14300     13     5   chance
#&gt; 165 511.69 0.80000                chance
#&gt; 166   0.00 0.90000              terminal
#&gt; 167   0.00 0.10000              terminal
#&gt; 168  85.24 0.20000              terminal
#&gt; 169   0.00 0.85700                chance
#&gt; 170 511.69 0.80000                chance
#&gt; 171   0.00 0.90000              terminal
#&gt; 172   0.00 0.10000              terminal
#&gt; 173  85.24 0.20000              terminal
#&gt; 174   0.00 0.99755                chance
#&gt; 175     NA 0.14300     13     5   chance
#&gt; 176 511.69 0.80000                chance
#&gt; 177   0.00 0.90000              terminal
#&gt; 178   0.00 0.10000              terminal
#&gt; 179  85.24 0.20000              terminal
#&gt; 180   0.00 0.85700                chance
#&gt; 181 511.69 0.80000                chance
#&gt; 182   0.00 0.90000              terminal
#&gt; 183   0.00 0.10000              terminal
#&gt; 184  85.24 0.20000              terminal
#&gt; 185   0.00 0.97000                chance
#&gt; 186   0.00 0.40000              terminal
#&gt; 187  50.00 0.60000                chance
#&gt; 188   0.00 0.99000              terminal
#&gt; 189   0.00 0.01000                chance
#&gt; 190   0.00 0.30000              terminal
#&gt; 191   0.00 0.70000                chance
#&gt; 192     NA 0.00245 87.889 6.679   chance
#&gt; 193     NA 0.14300     13     5   chance
#&gt; 194 511.69 0.80000              terminal
#&gt; 195  85.24 0.20000              terminal
#&gt; 196   0.00 0.85700                chance
#&gt; 197 511.69 0.80000              terminal
#&gt; 198  85.24 0.20000              terminal
#&gt; 199   0.00 0.99755                chance
#&gt; 200     NA 0.14300     13     5   chance
#&gt; 201 511.69 0.80000              terminal
#&gt; 202  85.24 0.20000              terminal
#&gt; 203   0.00 0.85700                chance
#&gt; 204 511.69 0.80000              terminal
#&gt; 205  85.24 0.20000              terminal
#&gt; 206   0.00 0.20000                chance
#&gt; 207   0.00 0.03000                chance
#&gt; 208   0.00 0.40000              terminal
#&gt; 209  50.00 0.60000                chance
#&gt; 210   0.00 0.16000              terminal
#&gt; 211   0.00 0.84000                chance
#&gt; 212   0.00 0.30000              terminal
#&gt; 213   0.00 0.70000                chance
#&gt; 214     NA 0.00245 87.889 6.679   chance
#&gt; 215     NA 0.14300     13     5   chance
#&gt; 216 511.69 0.80000                chance
#&gt; 217   0.00 0.90000              terminal
#&gt; 218   0.00 0.10000              terminal
#&gt; 219  85.24 0.20000              terminal
#&gt; 220   0.00 0.85700                chance
#&gt; 221 511.69 0.80000                chance
#&gt; 222   0.00 0.90000              terminal
#&gt; 223   0.00 0.10000              terminal
#&gt; 224  85.24 0.20000              terminal
#&gt; 225   0.00 0.99755                chance
#&gt; 226     NA 0.14300     13     5   chance
#&gt; 227 511.69 0.80000                chance
#&gt; 228   0.00 0.90000              terminal
#&gt; 229   0.00 0.10000              terminal
#&gt; 230  85.24 0.20000              terminal
#&gt; 231   0.00 0.85700                chance
#&gt; 232 511.69 0.80000                chance
#&gt; 233   0.00 0.90000              terminal
#&gt; 234   0.00 0.10000              terminal
#&gt; 235  85.24 0.20000              terminal
#&gt; 236   0.00 0.97000                chance
#&gt; 237   0.00 0.40000              terminal
#&gt; 238  50.00 0.60000                chance
#&gt; 239   0.00 0.99000              terminal
#&gt; 240   0.00 0.01000                chance
#&gt; 241   0.00 0.30000              terminal
#&gt; 242   0.00 0.70000                chance
#&gt; 243     NA 0.00245 87.889 6.679   chance
#&gt; 244     NA 0.14300     13     5   chance
#&gt; 245 511.69 0.80000              terminal
#&gt; 246  85.24 0.20000              terminal
#&gt; 247   0.00 0.85700                chance
#&gt; 248 511.69 0.80000              terminal
#&gt; 249  85.24 0.20000              terminal
#&gt; 250   0.00 0.99755                chance
#&gt; 251     NA 0.14300     13     5   chance
#&gt; 252 511.69 0.80000              terminal
#&gt; 253  85.24 0.20000              terminal
#&gt; 254   0.00 0.85700                chance
#&gt; 255 511.69 0.80000              terminal
#&gt; 256  85.24 0.20000              terminal
#&gt; 
#&gt; $data
#&gt; $data$data_prob
#&gt; [1] NA
#&gt; 
#&gt; $data$data_val
#&gt; [1] NA
#&gt; 
#&gt; 
#&gt; attr(,"details")
#&gt; [1] ""
#&gt; attr(,"class")
#&gt; [1] "costeffectiveness_object" "list"</code></pre>
<p>Create look-up tables using the cohort data to give proportion in each incidence in country of origin and the probability of LTBI for each of these.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who_levels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"(0,50]"</span>, <span class="st">"(50,150]"</span>, <span class="st">"(150,250]"</span>, <span class="st">"(250,350]"</span>, <span class="st">"(350,1e+05]"</span>)

p_incid_grp &lt;-<span class="st"> </span>miscUtilities<span class="op">::</span><span class="kw">prop_table</span>(IMPUTED_sample_year_cohort<span class="op">$</span>who_prev_cat_Pareek2011)

pLatentTB.who &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">who_prev_cat_Pareek2011 =</span> <span class="kw">names</span>(p_incid_grp),
                            <span class="dt">LTBI =</span> <span class="kw">c</span>(<span class="fl">0.03</span>, <span class="fl">0.13</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>))</code></pre></div>
<p>Then insert these probabilities in to the decision tree</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(who_levels)) {

  osNode.cost<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> p_incid_grp[i],
                  <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>name <span class="op">==</span><span class="st"> </span>who_levels[i])

  osNode.health<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> p_incid_grp[i],
                    <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>name <span class="op">==</span><span class="st"> </span>who_levels[i])
}

<span class="cf">for</span> (i <span class="cf">in</span> who_levels) {

  pLTBI &lt;-<span class="st"> </span><span class="kw">subset</span>(pLatentTB.who,
                  who_prev_cat_Pareek2011 <span class="op">==</span><span class="st"> </span>i,
                  <span class="dt">select =</span> LTBI)

  osNode.cost<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> pLTBI,
                  <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>pathString <span class="op">==</span><span class="st"> </span>miscUtilities<span class="op">::</span><span class="kw">pastef</span>(<span class="st">"LTBI screening cost"</span>, i, <span class="st">"LTBI"</span>))
  osNode.health<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> pLTBI,
                    <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>pathString <span class="op">==</span><span class="st"> </span>miscUtilities<span class="op">::</span><span class="kw">pastef</span>(<span class="st">"LTBI screening QALY loss"</span>, i, <span class="st">"LTBI"</span>))

  osNode.cost<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>pLTBI,
                  <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>pathString <span class="op">==</span><span class="st"> </span>miscUtilities<span class="op">::</span><span class="kw">pastef</span>(<span class="st">"LTBI screening cost"</span>, i, <span class="st">"non-LTBI"</span>))
  osNode.health<span class="op">$</span><span class="kw">Set</span>(<span class="dt">p =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>pLTBI,
                    <span class="dt">filterFun =</span> <span class="cf">function</span>(x) x<span class="op">$</span>pathString <span class="op">==</span><span class="st"> </span>miscUtilities<span class="op">::</span><span class="kw">pastef</span>(<span class="st">"LTBI screening QALY loss"</span>, i, <span class="st">"non-LTBI"</span>))
}</code></pre></div>
</div>
<div id="decision-tree-output" class="section level2">
<h2 class="hasAnchor">
<a href="#decision-tree-output" class="anchor"></a>Decision tree output</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/decision_tree_cluster.html">decision_tree_cluster</a></span>(<span class="dt">parameters =</span> scenario_parameters[[<span class="dv">1</span>]],
                       <span class="dt">n.uk_tb =</span> <span class="dv">10</span>,
                       <span class="dt">n.exit_tb =</span> <span class="dv">10</span>,
                       <span class="dt">cost_dectree =</span> <span class="st">"osNode_cost_2009.Rds"</span>,
                       <span class="dt">health_dectree =</span> <span class="st">"osNode_cost_2009.Rds"</span>)
<span class="co">#&gt; $mc_cost</span>
<span class="co">#&gt; [1] 37.73118 36.34105</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mc_health</span>
<span class="co">#&gt; [1] 81.58914 88.08845</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mc_n.tb_screen</span>
<span class="co">#&gt; $mc_n.tb_screen$n.tb_screen.all_tb</span>
<span class="co">#&gt;   sim       status  n</span>
<span class="co">#&gt; 1   1 disease-free  2</span>
<span class="co">#&gt; 2   1           tb 18</span>
<span class="co">#&gt; 3   2 disease-free  2</span>
<span class="co">#&gt; 4   2           tb 18</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mc_n.tb_screen$n.tb_screen.uk_tb</span>
<span class="co">#&gt;   sim       status  n</span>
<span class="co">#&gt; 1   1 disease-free  2</span>
<span class="co">#&gt; 2   1           tb  8</span>
<span class="co">#&gt; 3   2 disease-free  0</span>
<span class="co">#&gt; 4   2           tb 10</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $p_LTBI_to_effectiveTx</span>
<span class="co">#&gt; (350,1e+05] </span>
<span class="co">#&gt;    0.108864 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $subset_pop</span>
<span class="co">#&gt;    LTBI_pre tests  positive    startTx completeTx      cured LTBI_post</span>
<span class="co">#&gt; 1 0.2868171   0.6 0.1488349 0.08930096 0.05358058 0.03122406 0.2555931</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $call</span>
<span class="co">#&gt; decision_tree_cluster(parameters = scenario_parameters[[1]], </span>
<span class="co">#&gt;     n.uk_tb = 10, n.exit_tb = 10, cost_dectree = "osNode_cost_2009.Rds", </span>
<span class="co">#&gt;     health_dectree = "osNode_cost_2009.Rds")</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $N.mc</span>
<span class="co">#&gt; [1] 2</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#specific-intervention-data-prep">Specific intervention data prep</a></li>
      <li><a href="#prep-decision-tree">Prep decision tree</a></li>
      <li><a href="#decision-tree-output">Decision tree output</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nathan Green, <a href="https://www.rstudio.com"><img src="http://tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
